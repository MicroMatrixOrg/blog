<template>
  <!-- 已收到 -->
  <div>
    <div class="main-box">
      <div class="main-contents">
        <header>
            <div class="right">
                <!-- <Select v-model="year" style="width:148px" placeholder="请选择学年">
                    <Option v-for="item in yearList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select> -->
                <Select v-model="grade" style="width:148px" placeholder="请选择年级">
                    <Option v-for="item in gradeList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select>
                <!-- <Select v-model="session" style="width:148px" placeholder="请选择学期">
                    <Option v-for="item in sessionList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select> -->
                <Select v-model="subject" style="width:148px" placeholder="请选择学科">
                    <Option v-for="item in subjectList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select>
                <Select v-model="knowledgeSpot" style="width:148px" placeholder="请选择知识章节">
                    <Option v-for="item in knowledgeSpotList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select>
                <Select v-model="cdate" style="width:148px" placeholder="请选择日期">
                    <Option v-for="item in cdateList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                </Select>
                <span class="searchBtn">
                    <Input  placeholder="请输入任务名称或课时搜索" clearable style="width: 287px" />
                    <Button type="primary">搜索</Button>                                
                </span>
            </div>
        </header>
        <section>
            <Table stripe :columns="dColumns"  :data="dDatas">
              <template slot-scope="{ row, index }" slot="action">
                <div style="">
                  <a @click.stop.prevent="releaseDisc(row,index)">发布</a>
                </div>
              </template>
            </Table>
        </section>
        <footer>
          <Page :total="100" show-sizer show-total/>
        </footer>

        <Modal v-model="relemodal" width="825"  :mask-closable="false">
            <p slot="header" style="text-align:left">
                <span style="font-size:18px;">发布讨论</span>
            </p>
            <div style="height:435px;">
              <div  class="miss-li-from">
                <div style="text-align:left;margin-bottom:75px;">
                  <span class="miss-title">提交格式</span>
                  <div class="miss-type">
                    <Select v-model="missType" style="width:504px;margin-left:59px;">
                        <Option v-for="item in missList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                    </Select>
                  </div>
                  <p style="text-align:right;color:#84B6F9;width: calc(100% - 117px);">说明:要求学生提交本次任务的内容格式</p>
                </div>
                <div style="text-align:left;">
                  <span class="miss-title">发布对象</span>
                  <div class="miss-content">
                      <RadioGroup v-model="releObject">
                        <Radio label="班级"></Radio>
                        <Radio label="课堂"></Radio>
                      </RadioGroup>
                  </div>
                </div>
                 <div class = "grade-class" style="display:block;" v-show="releObject=='班级'">
                    <div style="">
                        <Checkbox
                            :indeterminate="indeterminate"
                            :value="checkAll"
                            @click.prevent.native="handleCheckAll">全选</Checkbox>
                    </div>
                    <CheckboxGroup v-model="checkAllGroup" @on-change="checkAllGroupChange">
                        <Checkbox label="初一1班"></Checkbox>
                    </CheckboxGroup>
                 </div>
                 <div class = "course-class" style="display:block;" v-show="releObject=='课堂'">
                    <Select v-model="course" style="width:504px;">
                        <Option v-for="item in courseList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                    </Select>
                    <RadioGroup v-model="submitType">
                      <Radio label="个人"></Radio>
                      <Radio label="小组"></Radio>
                    </RadioGroup>
                 </div>
              </div>

            </div>
            <div slot="footer" style="text-align:center">
                  <Button type="primary" >确认</Button>
                  <Button @click="cancle()">取消</Button>   
            </div>
        </Modal>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      submitType: "",
      missType: "",
      missList: [
        {
          value: "all",
          label: "all"
        },
        {
          value: "MP4",
          label: "MP4"
        },
        {
          value: "MP3",
          label: "MP3"
        },
        {
          value: "JPG",
          label: "JPG"
        }
      ],
      course: "",
      courseList: [
        {
          value: "某堂课",
          label: "某堂课"
        }
      ],
      indeterminate: true,
      checkAll: false,
      checkAllGroup: ["初一1班"],
      releObject: "班级",
      relemodal: false,
      yearList: [
        {
          value: "2019学年",
          label: "2019学年"
        },
        {
          value: "2020学年",
          label: "2020学年"
        }
      ],
      year: "",
      gradeList: [
        {
          value: "全部年级",
          label: "全部年级"
        },
        {
          value: "一年级",
          label: "一年级"
        }
      ],
      grade: "",
      sessionList: [
        {
          value: "2019学年下学期",
          label: "2019学年下学期"
        },
        {
          value: "2020学年上学期",
          label: "2020学年上学期"
        }
      ],
      session: "",
      subjectList: [
        {
          value: "全部学科",
          label: "全部学科"
        },
        {
          value: "语文",
          label: "语文"
        }
      ],
      subject: "",
      schollId: "",
      cdate: "",
      cdateList: [],
      knowledgeSpotList: [
        {
          value: "全部知识章节",
          label: "全部知识章节"
        },
        {
          value: "1",
          label: "1"
        }
      ],
      knowledgeSpot: "",
      dColumns: [
        {
          title: "序号",
          type: "index",
          width: 80,
          align: "center"
        },
        {
          title: "任务名称",
          key: "name",
          minWidth: 120,
          align: "center"
        },
        {
          title: "知识章节",
          key: "class",
          minwidth: 120,
          align: "center"
        },
        {
          title: "创建者",
          key: "missType",
          minWidth: 120,
          align: "center"
        },
        {
          title: "创建时间",
          key: "time",
          align: "center",
          minWidth: 180
        },
        {
          title: "操作",
          slot: "action",
          align: "center",
          width: 280
        }
      ],
      dDatas: [
        {
          name: "测试任务1",
          time: "2020-02-10 15:00",
          status: "已使用",
          class: "方程式",
          date: "2016-10-03",
          missType: "******"
        },
        {
          name: "测试任务2",
          time: "2020-02-10 15:00",
          status: "已使用",
          class: "方程式",
          date: "2016-10-03",
          missType: "******"
        },
        {
          name: "测试任务3",
          time: "2020-02-10 15:00",
          status: "未使用",
          class: "方程式",
          date: "2016-10-03",
          missType: "******"
        }
      ]
    };
  },
  created() {
    // var url='http://basedebug.bestsch.com/BschQuestionnaire/api/GetUserInfo';
    // this.$api.get(url, null, resp => {
    //   console.log(233);
    // });
  },
  mounted() {},
  methods: {
    cancle() {
      this.relemodal = false;
    },
    releaseDisc(row, index) {
      this.relemodal = true;
      console.log("我编辑了");
    },
    handleCheckAll() {
      if (this.indeterminate) {
        this.checkAll = false;
      } else {
        this.checkAll = !this.checkAll;
      }
      this.indeterminate = false;

      if (this.checkAll) {
        this.checkAllGroup = ["香蕉", "苹果", "西瓜"];
      } else {
        this.checkAllGroup = [];
      }
    },
    checkAllGroupChange(data) {
      if (data.length === 3) {
        this.indeterminate = false;
        this.checkAll = true;
      } else if (data.length > 0) {
        this.indeterminate = true;
        this.checkAll = false;
      } else {
        this.indeterminate = false;
        this.checkAll = false;
      }
    }
  }
};
</script>
<style lang="scss" scoped>
.wrap-main .main-box {
  min-width: 800px;
  overflow: auto;
}
.main-contents > header {
  display: flex;
  margin: 0 15px 20px 15px;
  justify-content: flex-end;
}
.main-contents > section {
  .ivu-table-wrapper {
    border-left: none;
  }

  .ivu-table-wrapper > .ivu-table td,
  .ivu-table th {
    border-bottom: none;
  }

  .ivu-table-wrapper > .ivu-table:before,
  .ivu-table:after {
    background-color: #fff;
  }
}

.main-contents > footer {
  margin-top: 120px;
  text-align: end;
}

.miss-li-from {
  // display: flex;
  // align-items: Center;
  height: calc(100%);
  padding-top: calc(12%);
}
.miss-title {
  width: 136px;
  text-align: left;
  font-size: 16px;
}
.miss-title:first {
  padding: 5px 0;
}
.miss-title::before {
  content: "*";
  color: #ed4014;
  margin: 0 20px;
  vertical-align: sub;
}
.miss-content {
  display: inline-block;
  width: calc(100% - 435px);
}
.miss-content > div {
  display: flex;
  justify-content: space-around;
}
.grade-class {
  div {
    display: inline-block;
  }
}
.grade-class > div:first-child {
  padding-left: 179px;
}
.course-class {
  div {
    display: inline-block;
  }
}
.course-class > div {
  margin-left: 260px;
  margin-top: 20px;
}
.course-class > div:first-child:before {
  content: "*";
  position: absolute;
  color: #ed4014;
  margin: 0 20px;
  left: 228px;
  bottom: calc(40.5%);
  display: table-cell;
}
.course-class > div:nth-child(2):before {
  content: "*";
  position: absolute;
  color: #ed4014;
  margin: 0 20px;
  left: 228px;
  bottom: calc(31.5%);
  display: table-cell;
}
.miss-type {
  display: inline-block;
  width: calc(100% - 136px);
}
</style>

