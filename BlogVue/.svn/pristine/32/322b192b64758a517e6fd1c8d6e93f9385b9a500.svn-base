<template>
    <div class="main-box">
        <div class="main-content">
          <div class="other-contents">
            <header style="display: flex;justify-content: space-between;">
              <div>
                <span style="font-size:18px;">讨论管理</span> > <span style="font-size:16px;">{{editDisc.name}}</span> > <span style="font-size:16px;">查看详情</span>
              </div>
              <!-- <div  @click="goback()" style="width: 55px;height: 30px; border: 1px solid #eee;text-align: center;border-radius: 20px;">
                <i style="vertical-align: sub;" class='fa fa-reply'></i>
              </div> -->
              <Button @click="goback()" type="primary" style=" display: inline-block;float:right;margin: 12px;">返回</Button>
            </header>
            <footer>
              <div style="text-align:left;min-height:600px;overflow:auto;">
                  <ul style="margin-bottom:50px;">
                      <li class="miss-li-from">
                        <div class="miss">
                          <span class="miss-title">讨论主题:</span>
                          <span class="miss-content">{{editDisc.name}}</span>
                        </div>

                      </li>
                      <li class="miss-li-from">
                        <div class="miss">
                          <span class="miss-title">知识章节:</span>
                          <span class="miss-content">{{editDisc.chapterName}}</span>
                        </div>
                      </li>
                      <!-- <li class="miss-li-from">
                        <div class="miss">
                          <span class="miss-title">创建者:</span>
                          <span class="miss-content">{{editDisc.createUserName}}</span>
                        </div>
                        <div class="miss">
                          <span class="miss-title">创建日期:</span>
                          <span class="miss-content">{{editDisc.createDate}}</span>
                        </div>
                      </li> -->
                  </ul>
                  <div>
                      <Tabs value="name1">
                          <TabPane label="讨论内容" name="name1">
                            <div style="margin-bottom:20px;">{{editDisc.content}}</div>
                            <div style="display:inline-block;height:100px;width:150px;" v-for="(item,index) in file.pics" :key="item.url + index">
                              <img :src="item.url" alt="" style="height:100px;width:150px;object-fit:contain;">
                            </div>
                            <div style="display:inline-block;height:100px;width:150px;" v-for="(item,index) in file.videos" :key="item.url + index">
                              <video style="height:100%;width:100%"  :src="typeof item.url =='undefined' ? '' : item.url" controls>Your browser can't support  Video</video>
                            </div>
                            <div style="display:inline-block;height:100px;width:300px;" v-for="(item,index) in file.musics" :key="item.url + index">
                              <audio  style="height:100%;width:100%;padding-bottom: 20px;"  controls :src="typeof item.url =='undefined' ? '' : item.url">Your browser can't support  Audio</audio>
                            </div>
                            
                          </TabPane>
                      </Tabs>
                  </div>
              </div>
            </footer>
          </div>
        </div>
    </div>

</template>


<script>
import myStorge from "../../utils/localStorge.js";
import FileNameMatch from "../../utils/fileNameMatch.js";
export default {
  components: {},
  props: {
    beforeViewFlag: {
      type: Boolean,
      default: () => {
        return false;
      }
    }
  },
  data() {
    const _this = this;
    return {
      discName: "",
      ViewModalFlag: false,
      showItem: {},
      editDisc: myStorge.get("teaEditMission"),

      file: {
        pics: [],
        videos: [],
        musics: []
      }
    };
  },
  mounted() {
    if (this.editDisc.fileId) {
      this.GetFileById(this.editDisc.fileId);
    }
  },
  methods: {
    goback() {
      let path = this.routerCfg.options.pathById(21);
      this.$router.push(path);
    },

    cancle() {
      this.ViewModalFlag = false;
    },
    GetFileById(ids) {
      var _this = this;
      var url = APIConfig.File.SearchTeaFilesByIds;
      this.$api.get(url, { ids: ids }, resp => {
        if (resp.code == 0) {
          this.file.pics = [];
          this.file.musics = [];
          this.file.videos = [];

          resp.data.forEach((file, index, arr) => {
            if (FileNameMatch.isPicture(file.name)) {
              this.file.pics.push(file); //需要传给后台的file文件

              // this.$emit("pics", this.file);
            } else if (FileNameMatch.isAudio(file.name)) {
              this.file.musics.push(file);
            } else if (FileNameMatch.isVideo(file.name)) {
              this.file.videos.push(file);
            }
          });
        }
        this.$emit("fileIds", this.fileIds);
        // debugger;
      });
    }
  }
};
</script>


<style lang="scss" scoped>
.miss {
  // width: 250px;
  margin-right: 20px;
}
.other-contents {
  min-width: 1276px;
  overflow: auto;
  > footer {
    border: 1px solid #eee;
    margin: 20px 30px;
    padding: 10px 20px;
  }
}
.other-contents > header {
  padding: 20px;
  border-bottom: 1px solid #eee;
  .add-btn {
    color: #fff;
    background-color: #51aafe;
    border-color: #51aafe;
  }
}
.miss-li-from {
  display: flex;
  margin-bottom: 20px;
}

.miss-title {
  width: 83px;
  text-align: right;
  margin-right: 20px;
  font-size: 16px;
}
.miss-content {
  font-size: 16px;
}

* /deep/ .ivu-tabs-nav .ivu-tabs-tab {
  font-size: 16px;
}
</style>
